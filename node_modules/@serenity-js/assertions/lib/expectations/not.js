"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.not = void 0;
const tiny_types_1 = require("tiny-types");
const Expectation_1 = require("../Expectation");
const outcomes_1 = require("../outcomes");
function not(assertion) {
    return new Not(assertion);
}
exports.not = not;
/**
 * @package
 */
class Not extends Expectation_1.Expectation {
    constructor(expectation) {
        super(Not.flipped(expectation.toString()));
        this.expectation = expectation;
    }
    static flipped(message) {
        return message.startsWith('not ')
            ? message.substring(4)
            : `not ${message}`;
    }
    answeredBy(actor) {
        return (actual) => this.expectation.answeredBy(actor)(actual)
            .then((outcome) => tiny_types_1.match(outcome)
            .when(outcomes_1.ExpectationMet, o => new outcomes_1.ExpectationNotMet(this.subject, o.expected, o.actual))
            .else(o => new outcomes_1.ExpectationMet(this.subject, o.expected, o.actual)));
    }
}
//# sourceMappingURL=not.js.map