"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.and = void 0;
const tiny_types_1 = require("tiny-types");
const Expectation_1 = require("../Expectation");
const outcomes_1 = require("../outcomes");
function and(...expectations) {
    return new And(expectations);
}
exports.and = and;
/**
 * @package
 */
class And extends Expectation_1.Expectation {
    constructor(expectations) {
        super(expectations.map(assertion => assertion.toString()).join(' and '));
        this.expectations = expectations;
    }
    answeredBy(actor) {
        return (actual) => this.expectations.reduce((previous, current) => previous.then(outcome => tiny_types_1.match(outcome)
            .when(outcomes_1.ExpectationNotMet, o => o)
            .else(_ => current.answeredBy(actor)(actual))), Promise.resolve(void 0));
    }
}
//# sourceMappingURL=and.js.map